install.packages('tidyverse')
library(tidyverse)
lib
library(tidyverse)
updateR()
install.packages('installr')
updater()
library(installr)
updateR()
if (!requireNamespace("remotes", quietly = TRUE)) {
install.packages("remotes")
}
remotes::install_github("mojaveazure/seurat-disk")
install.packages("DT")
install.packages("reticulate")
test_dataset <- read_csv('../data/AEIM373-object_data_test.csv')
setwd("~/Documents/nss_docs/nss_projects/codex_halo_qc/notebooks")
test_dataset <- read_csv('../data/AEIM373-object_data_test.csv')
library(tidyverse)
library(ggplot2)
library(plotly)
library(patchwork)
test_dataset <- read_csv('../data/AEIM373-object_data_test.csv')
intensity_cols <- test_dataset %>%
select(`Object Id`, contains('Intensity')) %>%
rename_with(~ gsub(" Intensity", "", .x, fixed = T))
classification_cols <- uploaded_file() %>%
select(contains('Positive Classification'))%>%
rename_with(~ gsub(" Positive Classification", "", .x, fixed = T)) %>%
colnames() %>%
as_tibble()
classification_cols <- test_dataset %>%
select(contains('Positive Classification'))%>%
rename_with(~ gsub(" Positive Classification", "", .x, fixed = T)) %>%
colnames() %>%
as_tibble()
marker_names_intensity <- intensity_cols %>%
select(!`Object Id`) %>%
colnames()
markers_intensity = c()
for(i in marker_names_intensity){
print(i)
i = str_replace(i, '([.])', "-")
markers_intensity = append(marker_names_intensity, i)
}
markers_intensity <- as_tibble(markers_intensity)
paired_intensity <- markers_intensity %>%
mutate(base_marker = word(value)) %>%
rename(select_cols = value) %>%
inner_join(classification_cols, by = c('base_marker' = 'value'))
intensity_cols <- test_dataset %>%
select(`Object Id`, contains('Intensity')) %>%
rename_with(~ gsub(" Intensity", "", .x, fixed = T))
classification_cols <- test_dataset %>%
select(contains('Positive Classification'))%>%
rename_with(~ gsub(" Positive Classification", "", .x, fixed = T)) %>%
colnames() %>%
as_tibble()
marker_names_intensity <- intensity_cols %>%
select(!`Object Id`) %>%
colnames()
markers_intensity = c()
for(i in marker_names_intensity){
print(i)
i = str_replace(i, '([.])', "-")
markers_intensity = append(marker_names_intensity, i)
}
markers_intensity <- as_tibble(markers_intensity)
paired_intensity <- markers_intensity %>%
mutate(base_marker = word(value)) %>%
rename(select_cols = value) %>%
inner_join(classification_cols, by = c('base_marker' = 'value'))
final_intensity <- paired_intensity$select_cols
markers_intensity_dict <- list()
for(i in 1:length(marker_names_intensity)) {
markers_intensity_dict[final_intensity[i]] <- marker_names_intensity[i]
}
markers_intensity_dict <- list()
for(i in 1:length(marker_names_intensity)) {
markers_intensity_dict[final_intensity[i]] <- marker_names_intensity[i]
}
test <- read_csv('../data/AIDN111-_object_data_test.csv')
test <- read_csv('../data/AIDN111-_object_data_test.csv')
View(test)
test_reduced <- test %>%
select(!`Image Location`)
test_reduced <- test %>%
select(!`Image Location`:`Algorithm Name`)
markers_cols <- test %>%
select(contains('Positive Classification'))%>%
rename_with(~ gsub(" Positive Classification", "", .x, fixed = T)) %>%
colnames() %>%
as.tibble()
markers_intensities <- test %>%
select(`Object Id`, contains('Intensity')) %>%
rename_with(~ gsub(" Intensity", "", .x, fixed = T)) %>%
colnames() %>%
as.tibble()
markers_cols <- test %>%
select(contains('Positive Classification'))%>%
rename_with(~ gsub(" Positive Classification", "", .x, fixed = T)) %>%
colnames() %>%
as.tibble() %>%
rename('class' = 'value')
markers_intensities <- test %>%
select(`Object Id`, contains('Intensity')) %>%
rename_with(~ gsub(" Intensity", "", .x, fixed = T)) %>%
colnames() %>%
as.tibble()%>%
rename('intensity' = 'value')
markers_intensities <- test %>%
select(`Object Id`, contains('Intensity')) %>%
rename_with(~ gsub(" Intensity", "", .x, fixed = T)) %>%
colnames() %>%
as.tibble()%>%
mutate(base_marker = word(value))
rename('intensity' = 'value')
markers_intensities <- test %>%
select(`Object Id`, contains('Intensity')) %>%
rename_with(~ gsub(" Intensity", "", .x, fixed = T)) %>%
colnames() %>%
as.tibble()%>%
mutate(base_marker = word(value)) %>%
rename('intensity' = 'value')
comb <- markers_cols %>%
left_join(markers_intensities, by = c('class' = 'base_marker'))
View(comb)
comb <- markers_cols %>%
right_join(markers_intensities, by = c('class' = 'base_marker'))
markers_intensities <- test %>%
select(contains('Intensity')) %>%
rename_with(~ gsub(" Intensity", "", .x, fixed = T)) %>%
colnames() %>%
as.tibble()%>%
mutate(base_marker = word(value)) %>%
rename('intensity' = 'value')
comb <- markers_cols %>%
right_join(markers_intensities, by = c('class' = 'base_marker'))
test_reduced <- test %>%
select(!`Image Location`:`Algorithm Name`) %>%
select(!contains('DAPI', 'ps6'))
test_reduced <- test %>%
select(!`Image Location`:`Algorithm Name`) %>%
select(!contains('DAPI', 'pS6'))
test_reduced <- test %>%
select(!`Image Location`:`Algorithm Name`) %>%
select(!contains('DAPI')) %>%
select(!contains('pS6'))
test_reduced <- test %>%
select(!`Image Location`:`Algorithm Name`) %>%
select(!contains('DAPI')) %>%
select(!contains('pS6'), !contains('Cytoplasm'), !contains('Nucleus'))
View(test_reduced)
test_reduced <- test %>%
select(!`Image Location`:`Algorithm Name`) %>%
select(!contains('DAPI')) %>%
select(!contains('pS6'), !contains('Cytoplasm'), !contains('Nucleus'), !contains('Completeness'))
test_reduced <- test %>%
select(!`Image Location`:`Algorithm Name`) %>%
select(!contains('DAPI')) %>%
select(!contains('pS6')) %>%
select(!contains('Cytoplasm')) %>%
select(!!contains('Nucleus')) %>%
select(!contains('Completeness'))
test_reduced <- test %>%
select(!`Image Location`:`Algorithm Name`) %>%
select(!contains('DAPI')) %>%
select(!contains('pS6')) %>%
select(!contains('Cytoplasm')) %>%
select(!contains('Nucleus')) %>%
select(!contains('Completeness'))
write_csv('../data/test.csv')
View(test)
setwd("~/Documents/nss_docs/nss_projects/codex_halo_qc/notebooks")
write_csv('../data/test.csv')
write_csv(test_reduced,'../data/test.csv')
library(tidyverse)
test <- read_csv('../data/AIDN111_object_data_test.csv')
test_reduced <- test %>%
select(!`Image Location`:`Algorithm Name`) %>%
select(!contains('DAPI')) %>%
select(!contains('pS6')) %>%
select(!contains('Cytoplasm')) %>%
select(!contains('Nucleus')) %>%
select(!contains('Completeness'))
write_csv(test_reduced,'../data/test.csv')
library(tidyverse)
